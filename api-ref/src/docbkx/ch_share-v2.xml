<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter [
   <!ENTITY % common_project  SYSTEM "../wadls/common_project.ent">
   %common_project;
   ]>
<chapter xmlns="http://docbook.org/ns/docbook"
   xmlns:xi="http://www.w3.org/2001/XInclude"
   xmlns:xlink="http://www.w3.org/1999/xlink"
   xmlns:linkend="http://www.w3.org/1999/linkend"
   xmlns:xref="http://www.w3.org/1999/xref"
   xmlns:wadl="http://wadl.dev.java.net/2009/02"
   version="5.0-extension RackBook-2.0"
   xml:id="share-api-v2"
   role="api-reference">
    <title>Shared File Systems API v2 (CURRENT)</title>
    <para>
        Provides coordinated access to shared or distributed file systems.
    </para>
    <para>
        The Shared File Systems API uses Compute-style micro-versions. Use the
        HTTP <code>X-Openstack-Manila-Api-Version</code> request header to specify a
        valid micro-version. For example, <code>"X-Openstack-Manila-Api-Version:
        2.6"</code>. If you omit this header, the default micro-version is 2.0.
    </para>
    <para>
        Other than the switch to the micro-versions approach, the Shared File
        Systems API v2.0 is functionally identical to the <link
        xlink:type="simple" xlink:href="api-ref-share-v1.html">Shared File
        Systems API v1.0</link>.
    </para>
    <para>
        Subsequent API v2 micro-versions, such as v2.1, differ from API v1.0.
        Look for notes that identify in which post-v2 micro-version a feature,
        method, or parameter was introduced.
    </para>
    <section xml:id="share-versions">
    <title>API versions</title>
    <para>
        Lists information for all Shared File Systems API versions.
    </para>
    <wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
        <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#versions">
            <wadl:method href="#share-listVersions" />
        </wadl:resource>
    </wadl:resources>
    </section>
    <section xml:id="share-extensions">
        <title>API extensions</title>
        <para>
            Lists available Shared File Systems API extensions.
        </para>
        <wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#extensions">
                <wadl:method href="#getExtensions"/>
            </wadl:resource>
        </wadl:resources>
    </section>
    <section xml:id="share-limits">
        <title>Limits</title>
        <para>
            Limits are the resource limitations that are allowed for each
            tenant (project). An administrator can configure limits in the
            <code>manila.conf</code> file.
        </para>
        <para>
            Users can query their rate and absolute limits. The absolute
            limits contain information about:
        </para>
        <itemizedlist>
           <listitem>
              <para>Total maximum share memory, in GBs.</para>
           </listitem>
           <listitem>
              <para>Number of share-networks.</para>
           </listitem>
           <listitem>
              <para>Number of share-snapshots.</para>
           </listitem>
           <listitem>
              <para>Number of shares.</para>
           </listitem>
           <listitem>
              <para>Shares and total used memory, in GBs.</para>
           </listitem>
           <listitem>
              <para>Snapshots and total used memory, in GBs.</para>
           </listitem>
        </itemizedlist>
        <para>
            Rate limits control the frequency at which users can issue
            specific API requests. Administrators use rate limiting to
            configure limits on the type and number of API calls that can be
            made in a specific time interval. For example, a rate limit can
            control the number of &GET; requests that can be processed during
            a one-minute period.
        </para>
        <wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#limits">
                <wadl:method href="#getLimits"/>
            </wadl:resource>
        </wadl:resources>
    </section>
    <section xml:id="share-shares">
        <title>Shares</title>
        <para>
            A share is a remote, mountable file system. You can mount a share
            to and access a share from several hosts by several users at a
            time.
        </para>
        <para>
            You can create a share and associate it with a network, list shares,
            and show information for, update, and delete a specified share.
        </para>
        <para>
            To create a share, specify one of these supported protocols:
        </para>
        <itemizedlist>
           <listitem>
                <para>
                    <code>NFS</code>. Network File System (NFS).
                </para>
            </listitem>
           <listitem>
                <para>
                    <code>CIFS</code>. Common Internet File System (CIFS).
                </para>
            </listitem>
            <listitem>
                <para>
                    <code>GLUSTERFS</code>. Gluster file system (GlusterFS).
                </para>
            </listitem>
            <listitem>
                <para>
                    <code>HDFS</code>. Hadoop Distributed File System (HDFS).
                </para>
            </listitem>
        </itemizedlist>
        <para>
            You can also create snapshots of shares. To create a snapshot, you
            specify the ID of the share that you want to snapshot.
        </para>
        <para>
            A share has one of these status values:
        </para>
        <table rules="all" frame="border">
           <caption>Share statuses</caption>
           <col width="30%"/>
           <col width="70%"/>
           <thead>
              <tr>
                 <th>Status</th>
                 <th>Description</th>
              </tr>
           </thead>
           <tbody>
              <tr>
                 <td>
                    <para><code>creating</code></para>
                 </td>
                 <td>
                    <para>The share is being created.</para>
                 </td>
              </tr>
              <tr>
                 <td>
                    <para><code>deleting</code></para>
                 </td>
                 <td>
                    <para>The share is being deleted.</para>
                 </td>
              </tr>
              <tr>
                 <td>
                    <para><code>error</code></para>
                 </td>
                 <td>
                    <para>An error occurred during share
                       creation.
                    </para>
                 </td>
              </tr>
              <tr>
                 <td>
                    <para><code>error_deleting</code></para>
                 </td>
                 <td>
                    <para>An error occurred during share
                       deletion.
                    </para>
                 </td>
              </tr>
              <tr>
                 <td>
                    <para><code>available</code></para>
                 </td>
                 <td>
                    <para>The share is ready to use.</para>
                 </td>
              </tr>
              <tr>
                 <td>
                    <para><code>manage_starting</code></para>
                 </td>
                 <td>
                    <para>Share manage started.</para>
                 </td>
              </tr>
              <tr>
                 <td>
                    <para><code>manage_error</code></para>
                 </td>
                 <td>
                    <para>Share manage failed.</para>
                 </td>
              </tr>
              <tr>
                 <td>
                    <para><code>unmanage_starting</code></para>
                 </td>
                 <td>
                    <para>Share unmanage started.</para>
                 </td>
              </tr>
              <tr>
                 <td>
                    <para><code>unmanage_error</code></para>
                 </td>
                 <td>
                    <para>Share cannot be unmanaged.</para>
                 </td>
              </tr>
              <tr>
                 <td>
                    <para><code>unmanaged</code></para>
                 </td>
                 <td>
                    <para>Share was unmanaged.</para>
                 </td>
              </tr>
              <tr>
                 <td>
                    <para><code>extending</code></para>
                 </td>
                 <td>
                    <para>
                        The extend, or increase, share size request was
                        issued successfully.
                    </para>
                 </td>
              </tr>
              <tr>
                 <td>
                    <para><code>extending_error</code></para>
                 </td>
                 <td>
                    <para>Extend share failed.</para>
                 </td>
              </tr>
              <tr>
                 <td>
                    <para><code>shrinking</code></para>
                 </td>
                 <td>
                    <para>Share is being shrunk.</para>
                 </td>
              </tr>
              <tr>
                 <td>
                    <para><code>shrinking_error</code></para>
                 </td>
                 <td>
                    <para>Failed to update quota on share shrinking.</para>
                 </td>
              </tr>
              <tr>
                 <td>
                    <para><code>shrinking_possible_data_loss_error</code></para>
                 </td>
                 <td>
                    <para>Shrink share failed due to possible data loss.</para>
                 </td>
              </tr>
           </tbody>
        </table>
        <para></para>
        <wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#shares">
                <wadl:method href="#createShare"/>
                <wadl:method href="#getShares"/>
            </wadl:resource>
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#detail-share">
                <wadl:method href="#getSharesDetails"/>
            </wadl:resource>
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#share_id">
                <wadl:method href="#getShare"/>
                <wadl:method href="#updateShare"/>
                <wadl:method href="#deleteShare"/>
            </wadl:resource>
        </wadl:resources>
    </section>
    <section xml:id="share-metadata">
        <title>Share metadata</title>
        <para>
            Shows, sets, updates, and unsets share metadata.
        </para>
        <wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#metadata-share">
                <wadl:method href="#getShareMetadata"/>
                <wadl:method href="#updateShareMetadata"/>
                <wadl:method href="#setShareMetadata"/>
            </wadl:resource>
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#metadata_key">
                <wadl:method href="#unSetShareMetadata"/>
            </wadl:resource>
        </wadl:resources>
    </section>
    <section xml:id="share-actions">
        <title>Share actions</title>
        <para>
            Use share actions to grant or deny access to a specified share,
            list the permissions for a specified share, and explicitly update
            the state of a share.
        </para>
        <para>
            To grant or deny access to a share, specify one of these supported
            share access levels:
        </para>
        <itemizedlist>
            <listitem>
                <para>
                    <code>rw</code>. Read and write (RW) access.
                </para>
            </listitem>
            <listitem>
                <para>
                    <code>ro</code>. Read-only (RO) access.
                </para>
            </listitem>
        </itemizedlist>
        <para>
            You must also specify one of these supported authentication
            methods:
        </para>
        <itemizedlist role="compact">
            <listitem>
                <para>
                    <code>ip</code>. Authenticates an instance through its IP
                    address. A valid format is <code>XX.XX.XX.XX</code> or
                    <code>XX.XX.XX.XX/XX</code>. For example <code>0.0.0.0/0</code>.
                </para>
            </listitem>
            <listitem>
                <para>
                    <code>cert</code>. Authenticates an instance through a TLS
                    certificate. Specify the TLS identity as the IDENTKEY. A
                    valid value is any string up to 64 characters long in the
                    common name (CN) of the certificate. The meaning of a
                    string depends on its interpretation.
                </para>
            </listitem>
            <listitem>
                <para>
                    <code>user</code>. Authenticates by a specified user or
                    group name. A valid value is an alphanumeric string that
                    can contain some special characters and is from 4 to 32
                    characters long.
                </para>
            </listitem>
        </itemizedlist>
        <para>
            To verify that the access rules (ACL) were configured correctly
            for a share, you list permissions for a share.
        </para>
        <para>
            As administrator, you can reset the state of a share and
            force-delete a specified share in any state. Use the
            <code>policy.json</code> file to grant permissions for this
            action to other roles.
        </para>
        <para>
            You can set the state of a share to one of these supported states:
        </para>
        <itemizedlist>
            <listitem>
                <para><code>available</code></para>
            </listitem>
            <listitem>
                <para><code>error</code></para>
            </listitem>
            <listitem>
                <para><code>creating</code></para>
            </listitem>
            <listitem>
                <para><code>deleting</code></para>
            </listitem>
            <listitem>
                <para><code>error_deleting</code></para>
            </listitem>
        </itemizedlist>
        <wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#action">
                <wadl:method href="#allowAccess"/>
                <wadl:method href="#denyAccess"/>
                <wadl:method href="#listAccessRules"/>
                <wadl:method href="#resetShareState"/>
                <wadl:method href="#force-deleteShare"/>
                <wadl:method href="#extendShare"/>
                <wadl:method href="#shrinkShare"/>
            </wadl:resource>
        </wadl:resources>
    </section>
    <section xml:id="share-snapshots">
        <title>Share snapshots</title>
        <para>
            Use the shared file service to make snapshots of shares. A share
            snapshot is a point-in-time, read-only copy of the data that is
            contained in a share. You can create, update, and delete share
            snapshots. After you create a share snapshot, you can create a
            share from it.
        </para>
        <para>
            You can update a share snapshot to rename it, change its
            description, or update its state to one of these supported states:
        </para>
        <itemizedlist>
            <listitem>
                <para><code>available</code></para>
            </listitem>
            <listitem>
                <para><code>error</code></para>
            </listitem>
            <listitem>
                <para><code>creating</code></para>
            </listitem>
            <listitem>
                <para><code>deleting</code></para>
            </listitem>
            <listitem>
                <para><code>error_deleting</code></para>
            </listitem>
        </itemizedlist>
        <para>
            As administrator, you can also reset the state of a snapshot and
            force-delete a specified share snapshot in any state.
            Use the <code>policy.json</code> file to grant permissions for
            these actions to other roles.
        </para>
        <wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#snapshots">
                <wadl:method href="#share-createSnapshot" />
                <wadl:method href="#share-getSnapshots" />
            </wadl:resource>
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#detail-snapshot">
                <wadl:method href="#share-getSnapshotsDetails" />
            </wadl:resource>
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#snapshot_id">
                <wadl:method href="#share-getSnapshot" />
                <wadl:method href="#share-updateSnapshot" />
                <wadl:method href="#share-deleteSnapshot" />
            </wadl:resource>
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#snapshot-action">
                <wadl:method href="#resetSnapshotState" />
                <wadl:method href="#forceshare-deleteSnapshot" />
            </wadl:resource>
        </wadl:resources>
    </section>
    <section xml:id="share-share-networks">
        <title>Share networks</title>
        <para>
            A share network stores network information that share servers can
            use where shares are hosted. You can associate a share with a
            single share network. When you create a share, you can
            optionally specify the ID of a share network through which
            instances can access the share.
        </para>
        <para>
            You can create, update, view, and delete a share network.
        </para>
        <para>
            When you create a share network, you can specify only one type of network:
        </para>
        <itemizedlist>
            <listitem>
                <para>Neutron network. Specify a network ID and subnet ID.
                </para>
            </listitem>
            <listitem>
                <para>Nova network. Specify a network ID.
                </para>
            </listitem>
        </itemizedlist>
        <para>
            For more information about supported plug-ins for share networks, see <link
            xlink:type="simple" xlink:href="http://docs.openstack.org/developer/manila/adminref/network_plugins.html">Manila
            Network Plugins</link>.
        </para>
        <para>
            A share network has these attributes:
        </para>
        <itemizedlist role="compact">
            <listitem>
                <para>
                    The IP block in Classless Inter-Domain Routing (CIDR)
                    notation from which to allocate the network.
                </para>
            </listitem>
            <listitem>
                <para>
                    The IP version of the network.
                </para>
            </listitem>
            <listitem>
                <para>
                    The network type, which is <code>vlan</code>,
                    <code>vxlan</code>, <code>gre</code>,
                    <code>flat</code>, or <code>local</code>.
                </para>
            </listitem>
            <listitem>
                <para>
                    If the network uses segmentation, a segmentation
                    identifier. For example, VLAN, VXLAN, and GRE networks use
                    segmentation.
                </para>
            </listitem>
        </itemizedlist>
        <wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#share-networks">
                <wadl:method href="#createShareNetwork"/>
                <wadl:method href="#getShareNetworks"/>
            </wadl:resource>
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#detail-share-network">
                <wadl:method href="#getShareNetworksDetails"/>
            </wadl:resource>
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#share_network_id">
                <wadl:method href="#getShareNetwork"/>
                <wadl:method href="#updateShareNetwork"/>
                <wadl:method href="#deleteShareNetwork"/>
            </wadl:resource>
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#share-network-action">
                <wadl:method href="#addSecurityService"/>
                <wadl:method href="#removeSecurityService"/>
            </wadl:resource>
        </wadl:resources>
    </section>
    <section xml:id="share-security-services">
        <title>Security services</title>
        <para>
            You can create, update, view, and delete a security service. A
            security service stores configuration information for clients for
            authentication and authorization (AuthN/AuthZ). For example, a
            share server will be the client for an existing service such as
            LDAP, Kerberos, or Microsoft Active Directory.
        </para>
        <para>
            You can associate a share with from one to three security service
            types:
        </para>
        <itemizedlist>
            <listitem>
                <para><code>ldap</code>. LDAP.
                </para>
            </listitem>
            <listitem>
                <para>
                    <code>kerberos</code>. Kerberos.
                </para>
            </listitem>
            <listitem>
                <para>
                    <code>active_directory</code>. Microsoft Active Directory.
                </para>
            </listitem>
        </itemizedlist>
        <para>
            You can configure a security service with these options:
        </para>
        <itemizedlist>
            <listitem>
                <para>A DNS IP address.</para>
            </listitem>
            <listitem>
                <para>An IP address or host name.</para>
            </listitem>
            <listitem>
                <para>A domain.</para>
            </listitem>
            <listitem>
                <para>A user or group name.
                </para>
            </listitem>
            <listitem>
                <para>The password for the user, if you specify a user name.</para>
            </listitem>
        </itemizedlist>
        <wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#security-services">
                <wadl:method href="#createSecurityService"/>
                <wadl:method href="#getSecurityServices"/>
            </wadl:resource>
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#detail-security-service">
                <wadl:method href="#getSecurityServicesDetails"/>
            </wadl:resource>
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#security_service_id">
                <wadl:method href="#getSecurityService"/>
                <wadl:method href="#updateSecurityService"/>
                <wadl:method href="#deleteSecurityService"/>
            </wadl:resource>
        </wadl:resources>
    </section>
    <section xml:id="share-share-servers">
        <title>Share servers</title>
        <para>
            A share server is created by multi-tenant back-end drivers where
            shares are hosted. For example, with the <code>generic</code>
            driver, shares are hosted on Compute VMs. With the
            <code>cluster_mode</code> driver from NetApp, shares are hosted on
            virtual storage servers, also known as Vservers or SVMs.
        </para>
        <para>
            Administrators can perform read and delete actions for share
            servers. An administrator can delete an active share server only
            if it contains no dependent shares. If an administrator deletes the
            share server, the Shared File Systems service creates a share
            server in response to a subsequent create share request.
        </para>
        <para>
            An administrator can use the <code>policy.json</code> file to
            grant permissions for share server actions to other roles.
        </para>
        <para>
            The status of a share server indicates its current state. After
            you successfully set up a share server, its status is
            <code>active</code>. If errors occur during set up such as when
            server data is not valid, its status is <code>error</code>.
        </para>
        <para>
            The possible share servers statuses are:
        </para>
        <table rules="all" frame="border">
           <caption>Share server statuses</caption>
           <col width="30%"/>
           <col width="70%"/>
           <thead>
              <tr>
                 <th>Status</th>
                 <th>Description</th>
              </tr>
           </thead>
           <tbody>
              <tr>
                 <td>
                    <para><code>active</code></para>
                 </td>
                 <td>
                    <para>Share server was successfully set up.</para>
                 </td>
              </tr>
              <tr>
                 <td>
                    <para><code>error</code></para>
                 </td>
                 <td>
                    <para>The set up or deletion of the share server failed.
                    </para>
                 </td>
              </tr>
              <tr>
                 <td>
                    <para><code>deleting</code></para>
                 </td>
                 <td>
                    <para>The share server has no dependent shares and is being
                        deleted.</para>
                 </td>
              </tr>
              <tr>
                 <td>
                    <para><code>creating</code></para>
                 </td>
                 <td>
                    <para>The share server is being created on the back end with data
                       from the database.
                    </para>
                 </td>
              </tr>
           </tbody>
        </table>
        <para></para>
        <wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#share-servers">
                <wadl:method href="#getShareServers"/>
            </wadl:resource>
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#share_server_id">
                <wadl:method href="#getShareServer"/>
                <wadl:method href="#deleteShareServer"/>
            </wadl:resource>
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#detail-share-server">
                <wadl:method href="#getShareServerDetails"/>
            </wadl:resource>
        </wadl:resources>
    </section>
    <section xml:id="share-share-instances">
        <title>Share instances (since API v2.3)</title>
        <para>
            Administrators can list, show information for, explicitly
            set the state of, and force-delete share instances. Use the
            <code>policy.json</code> file to grant permissions for these
            actions to other roles.
        </para>
        <wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#share-instances">
                <wadl:method href="#getShareInstances"/>
            </wadl:resource>
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#share_instance_id">
                <wadl:method href="#getShareInstance"/>
            </wadl:resource>
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#share-instances-action">
                <wadl:method href="#resetShareInstanceState"/>
                <wadl:method href="#force-deleteShareInstance"/>
            </wadl:resource>
        </wadl:resources>
    </section>
    <section xml:id="share-type">
        <title>Share types</title>
        <para>
            A share type enables you to filter or choose back ends before you
            create a share. A share type behaves in the same way as a Block
            Storage volume type behaves.
        </para>
        <para>
            You set a share type to private or public and manage the access to
            the private share types.
        </para>
        <para>
            When you issue a create a share type request, you can submit a
            request body with either a <code>share_type</code> or
            <code>volume_type</code> object. The use of the
            <code>volume_type</code> object is deprecated but supported. It is
            recommended that you use the <code>share_type</code> object when
            you create a share type.
        </para>
        <para>
            No matter which object type you include in the request, the API
            creates both a <code>volume_type</code> object and a
            <code>share_type</code> object. Both objects have the same ID.
            When you issue a list share types request, the response shows both
            <code>share_types</code> and <code>volume_types</code> objects.
        </para>
        <para>You can set share types as either public or private. By default
            a share type is created as publicly accessible. Set
            <code>os-share-type-access:is_public</code> to <code>False</code>
            to make the share type private.
        </para>
        <para>
            You can manage the access to the private share types for the
            different projects. You can add access, remove access, and get
            information about access for a specified private share type.
        </para>
        <para>
            Administrators can create share types with these extra
            specifications that are used to filter back ends:
        </para>
        <itemizedlist>
            <listitem>
                <para>
                    <code>driver_handles_share_servers</code>. Required.
                    Defines the driver mode for share server, or storage, life cycle management. The
                    Shared File Systems service creates a share server for the export of shares.
                </para>
                <para>
                    Set to <code>True</code> when the share driver manages, or handles,
                    the share server life cycle.
                </para>
                <para>
                    Set to <code>False</code> when an administrator rather than a
                    share driver manages the storage life cycle.
                </para>
            </listitem>
            <listitem>
                <para>
                    <code>snapshot_support</code>. Filters back ends by
                    whether they do or do not support share snapshots.
                </para>
                <para>
                    Set to <code>True</code> to find back ends that support share snapshots.
                </para>
                <para>
                    Set to <code>False</code> to find back ends that do not support share
                    snapshots.
                </para>
            </listitem>
        </itemizedlist>
        <para>
            Administrators can also set additional extra specifications for a
            share type for the following purposes:
        </para>
        <itemizedlist>
            <listitem>
                <para>
                    Filter back ends. Specify these unqualified extra
                    specifications in this format:
                    <code>extra_spec=value</code>. For example,
                    <code>netapp_raid_type=raid4</code>.
                </para>
            </listitem>
            <listitem>
                <para>
                    Set data for the driver. Except for the special
                    <code>capabilities</code> prefix, you specify these
                    qualified extra specifications with its prefix followed by
                    a colon: <code>vendor:extra_spec=value</code>. For
                    example, <code>netapp:thin_provisioned=true</code>.
                </para>
            </listitem>
        </itemizedlist>
        <para>
            The scheduler uses the special <code>capabilities</code> prefix
            for filtering. The scheduler can only create a share on a back end
            that reports capabilities that match the un-scoped extra-spec keys
            for the share type. For details, see <link
            xlink:type="simple" xlink:href="http://docs.openstack.org/developer/manila/devref/capabilities_and_extra_specs.html">Capabilities and Extra-Specs</link>.
        </para>
        <para>
            Each driver implementation determines which extra specification
            keys it uses. For details, see the documentation for the driver.
        </para>
        <para>
            An administrator can use the <code>policy.json</code> file to
            grant permissions for share type creation with extra
            specifications to other roles.
        </para>
        <wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#share-type">
                <wadl:method href="#share-createShareType"/>
                <wadl:method href="#share-getShareTypes"/>
            </wadl:resource>
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#default-share-type">
                <wadl:method href="#getDefaultShareTypes"/>
            </wadl:resource>
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#share_type_id">
                <wadl:method href="#share-deleteShareType"/>
            </wadl:resource>
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#share-type-action">
                <wadl:method href="#addShareTypeAccess"/>
                <wadl:method href="#removeShareTypeAccess"/>
            </wadl:resource>
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#os-share-type-access">
                <wadl:method href="#listShareTypeAccess"/>
            </wadl:resource>
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#extra-specs-share-type">
                <wadl:method href="#getExtraSpecsShareType"/>
                <wadl:method href="#setExtraSpecShareType"/>
            </wadl:resource>
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#extra-spec-key">
                <wadl:method href="#unsetExtraSpecShareType"/>
            </wadl:resource>
        </wadl:resources>
    </section>
    <section xml:id="pools">
        <title>Back-end storage pools</title>
        <para>
            An administrator can list all back-end storage pools that are
            known to the scheduler service.
        </para>
        <wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#pools">
                <wadl:method href="#getPools"/>
            </wadl:resource>
            <wadl:resource href="../wadls/share-api/src/v2/os-share-v2.wadl#detail-pools">
                <wadl:method href="#getPoolsDetails"/>
            </wadl:resource>
        </wadl:resources>
    </section>
</chapter>
